# poc-automated-tests-web-app

This repository aims to show the usage of an automated web app testing suite.
It will also implement automated actions.

# The Web-app

run this command in the `web-app/` folder
> docker-compose up -d 


## How does this repository works ?
The web-app folder contains only the necessary files for MUTE to run in a Docker container. *(For the CI, it represents the folder needed for the test to run)*
The mute-full-folder contains the code available in this [release code](https://github.com/BaptisteHubert/mute/releases/tag/0.12.3) with a slight modification.

In the `src/environment/environment.prod.ts` file (*line 6 to 17*):
The host value and the signalingServer address is changed.
```
const host = 'localhost' // FIXME: interpolation at build time required

export const environment: IEnvironment = {
  ...defaultEnvironment, // we extend the default environment

  production: true,

  p2p: {
    // Signaling server URL
    // See https://github.com/coast-team/sigver
    signalingServer: `ws://${host}:8011`,
  },
```

instead of 

```
const host = 'mutehost.loria.fr' // FIXME: interpolation at build time required

export const environment: IEnvironment = {
  ...defaultEnvironment, // we extend the default environment

  production: true,

  p2p: {
    // Signaling server URL
    // See https://github.com/coast-team/sigver
    signalingServer: `wss://${host}:8010`,
  },
```

As we want to test Gitlab CI, we created a branch, mute-ci.
In this branch, there is a new folder, the `mute-full-folder` aims to represent the mute repository at all time. The CI that will be integrated on the repository on gitlab will emulate the CI that we will integrate on the repository of Mute.

### The files needed to run the mute app
Here is the list of all the files that are need to run mute as an app :
- `conf/` *(whole folder)*
- `dist/` *(whole folder, generated by building mute)*
- `.dockerignore`
- `docker_actions.sh`
- `docker-compose.yml`
- `Dockerfile`
- `DockerfileSigver`
- `process.yml`


### The files needed for mute to build
- `scripts/` *(whole folder)*
- `src/` *(whole folder)*
- `angular.json`
- `ngsw-config.json`
- `tsconfig.json`
- `package.json`
- `package-lock.json`

## Side note
- If you are trying to run the test locally on a Windows system *(or a system without sh support)*, you will need to have the sh command installed.  
 *(when you have git installed, you can add `C:\Program Files\Git\bin` to your environment variables)* 

Further down the line, it won't be needed as everything will be bundled in a docker container and running the test will be the same on all system. (WIP)




